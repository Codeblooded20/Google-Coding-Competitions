From c75084f83c8e6c1bd7da3fc52250ead1fda0b9d3 Mon Sep 17 00:00:00 2001
From: Saurabh Pande <yadvendrapande@gmail.com>
Date: Fri, 24 Apr 2020 10:26:56 +0000
Subject: [PATCH] Create patch file

---
 client.py      |  28 ++++++++++++----------------
 client.pyc     | Bin 0 -> 1362 bytes
 client_test.py |   6 +++++-
 3 files changed, 17 insertions(+), 17 deletions(-)
 create mode 100644 client.pyc

diff --git a/client.py b/client.py
index 40badcd..e7e71a6 100644
--- a/client.py
+++ b/client.py
@@ -35,25 +35,21 @@ def getDataPoint(quote):
 	stock = quote['stock']
 	bid_price = float(quote['top_bid']['price'])
 	ask_price = float(quote['top_ask']['price'])
-	price = bid_price
+	price = (bid_price + ask_price)/2
 	return stock, bid_price, ask_price, price
 
 def getRatio(price_a, price_b):
-	""" Get ratio of price_a and price_b """
-	""" ------------- Update this function ------------- """
-	""" Also create some unit tests for this function in client_test.py """
-	return 1
+  if (price_b == 0):
+    return
+  return price_a/price_b
 
 # Main
 if __name__ == "__main__":
-
-	# Query the price once every N seconds.
-	for _ in xrange(N):
-		quotes = json.loads(urllib2.urlopen(QUERY.format(random.random())).read())
-
-		""" ----------- Update to get the ratio --------------- """
-		for quote in quotes:
-			stock, bid_price, ask_price, price = getDataPoint(quote)
-			print "Quoted %s at (bid:%s, ask:%s, price:%s)" % (stock, bid_price, ask_price, price)
-
-		print "Ratio %s" % getRatio(price, price)
+  for _ in xrange(N):
+    quotes = json.loads(urllib2.urlopen(QUERY.format(random.random())).read())
+    prices = {}
+    for quote in quotes:
+      stock, bid_price, ask_price, price = getDataPoint(quote)
+      prices[stock] = price
+      print "Quoted %s at (bid:%s, ask:%s, price:%s)" % (stock, bid_price, ask_price, price)
+    print "Ratio %s" % getRatio(prices['ABC'], prices['DEF'])
diff --git a/client.pyc b/client.pyc
new file mode 100644
index 0000000000000000000000000000000000000000..12acb2d5a05e9694774de9db443db39aaeba3829
GIT binary patch
literal 1362
zcmb_bOK;Oa5dPM7LlaUceE_+c1Hwo^fD@{C)AG1fB^5$gfaQ9p?WT@5^=?oR>8bn+
zZd|zV3;0`bhuLich%>f#c4l^Fb{?O@?{h8t?ep6Lljj8Q_j#E)0Z9G?N+A8s3#4MI
z50C~^K13QqvL=FLeg-naM|NyL&UoeoXcn@8y#RGn9DD^eK{GfKSbg&eX$usfe-Z@r
z+n@;jIZ%jxh$A>7{`#jTe0my+L(k)24Ro6Q?;t$`YJko-yVnuY1*D5emyj-l_?rhU
z;I`x(7C?)jC8ynvaQ4a5{V#YaXF+^657|V=Z7p<;0)M)LmzD3rW^$6-qJHwTZZ0sp
zYwd8Q+bwmGm%G~7m0Q<uUGMIXsD6J>$vYno)emlA!3#6IB3_SpnGGgmAF^{OV2_0W
z9d28Pvp)=`y6BHC#5lk>#5r!}@?nIrm?*}PD`PWhxX3F^;*DC%Q9*HDma*QB?JmU?
zkt7+v%gYg&*y?zPDynnKMzPFoKGdqRv2|G*tBXDBKw$MS+fveNhqWr`w>CF>DqxGm
zmFCa4OP$-q`FnAHq%HMWf^9P4DA{oYC$aaj)blZ%RpN-b%cQ%j2h^=c73bG|Ruwf#
zwN=u?TJKS{p@vkdN>w}E{&0{DxXzNY8{MK*RM~68_qNR;cF3-BO&h)@7q`U(VM{FW
zdrB1U*6H%|IL`|1Cj;F<lZOv%@_bmeyqP%5bq3ocNiX|G_=2+hFMi9H@!x8h<vY2S
zUT&4X%)D_UhG>gOSa+6XgIrZvW-hVt+;v>W7fqboIN^q`Tr^i=ZnfWiuFPFF&e2C?
zQya4I;Nc^`udY2#&a&+58P#Q}wr*MnS*r%*nZD7Lbve{|CH24$`uU5s-Ye^1u-@~b
z-7hl9uF40LW!~d}UAPoymw7*ii!{@#^pL0L0&nYjkXwIQO}X?s4<+MSUxn#8lzD9R
zoKMd|^&cc9toko-awXk9hS}X^7c*wk<`M84Ho`{GY&IKhu_&&JhL{uQMN4$VFE}kG
AAOHXW

literal 0
HcmV?d00001

diff --git a/client_test.py b/client_test.py
index a608a01..0c4038d 100644
--- a/client_test.py
+++ b/client_test.py
@@ -8,13 +8,17 @@ class ClientTest(unittest.TestCase):
       {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
     ]
     """ ------------ Add the assertion below ------------ """
+    for quote in quotes:
+      self.assertEqual(getDataPoint(quote), (quote['stock'], quote['top_bid']['price'], quote['top_ask']['price'], (quote['top_ask']['price'] + quote['top_bid']['price'])/2))
 
   def test_getDataPoint_calculatePriceBidGreaterThanAsk(self):
     quotes = [
       {'top_ask': {'price': 119.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
-      {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
+      {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 125.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
     ]
     """ ------------ Add the assertion below ------------ """
+    for quote in quotes:
+      self.assertEqual(getDataPoint(quote), (quote['stock'], quote['top_bid']['price'], quote['top_ask']['price'], (quote['top_ask']['price'] + quote['top_bid']['price'])/2))
 
 
   """ ------------ Add more unit tests ------------ """
-- 
2.20.1

